
# ROM, Firmware, Bootloader, Kernel, and OS Storage  
## Where Everything Lives and What Reloads on Every Boot

This document explains **where the OS actually resides**, what lives in **ROM vs HDD/SSD vs RAM**, and **why firmware, bootloader, and kernel reload on every power-on**, while the OS installation remains on disk.

This is written from **hardware-first principles**, not Linux commands.

---

## 1. The Core Confusion This Document Solves

A common question is:

> “If the OS is already installed, why does the system still go through firmware and bootloader every time?”

The answer lies in **where data is stored** and **what survives power-off**.

---

## 2. Three Very Different Storage Types

### 2.1 ROM / Flash (Non-Volatile, Executable)

- Lives on the **motherboard**
- Retains data without power
- Directly executable by the CPU
- Very small

Used for:
- Firmware (BIOS / UEFI)

---

### 2.2 HDD / SSD (Non-Volatile, NOT Executable)

- Lives on disk
- Retains data without power
- Stores large amounts of data
- **CPU cannot execute code directly from disk**

Used for:
- Installed Operating System files
- Kernel image (as a file)
- System libraries
- User programs

Disk is **storage**, not execution memory.

---

### 2.3 RAM (Volatile, Executable)

- Loses all data on power-off
- Fast
- CPU executes instructions from here

Used for:
- Running kernel
- Running processes
- Active OS state

---

## 3. What Lives Where (Clear Table)

| Component | ROM / Flash | HDD / SSD | RAM |
|--------|-------------|-----------|-----|
| Firmware (BIOS/UEFI) | ✅ | ❌ | ❌ |
| Bootloader | ❌ | ✅ | ❌ |
| OS files | ❌ | ✅ | ❌ |
| Kernel file | ❌ | ✅ | ❌ |
| Running kernel | ❌ | ❌ | ✅ |
| Running processes | ❌ | ❌ | ✅ |

---

## 4. What Happens When You Power OFF

When power is removed:

- RAM is completely wiped
- CPU registers are cleared
- Running kernel disappears
- All processes disappear

Only **non-volatile storage survives**:
- ROM / flash
- HDD / SSD

There is **no running OS** after power-off.

---

## 5. What Happens When You Power ON (Every Time)

Every power-on follows the same logic:

### Step 1: CPU Reset
- CPU resets internal state
- Program Counter (PC) is set to a **fixed hardware-defined address**
- That address points to firmware in ROM

### Step 2: Firmware Runs
- Firmware initializes hardware
- Firmware decides where to boot from
- Firmware loads the bootloader into RAM

### Step 3: Bootloader Runs
- Bootloader understands disk and filesystem
- Bootloader finds the kernel file on disk
- Bootloader copies kernel into RAM
- Bootloader jumps to kernel entry point

### Step 4: Kernel Runs
- Kernel initializes memory management
- Kernel enables user/kernel mode separation
- Kernel starts the first user process
- Full OS comes alive

This happens **on every boot**.

---

## 6. Why Kernel Must Reload Every Time

- Kernel runs in RAM
- RAM is volatile
- Power-off destroys kernel state

So even if:
- Same kernel version
- Same OS
- Same disk

The kernel instance is always **fresh**.

---

## 7. Why OS Stays on HDD / SSD

The OS installation:
- Is just files on disk
- Survives power-off
- Is not “running” by itself

Think of it as:
> A blueprint stored on disk, reconstructed into a living system at boot.

---

## 8. Is Firmware a Small OS?

Conceptually:
- Firmware behaves like a **very tiny, special-purpose OS**

But:
- No multitasking
- No user processes
- No isolation
- No general scheduling

Firmware’s only job is **to start the real OS**.

---

## 9. Clean Mental Model (Memorize This)

> ROM knows how to start.  
> Disk knows what to start.  
> RAM is where it actually runs.

Or:

> Firmware is permanent.  
> OS is stored.  
> Kernel is re-created on every boot.

---

## 10. Final One-Line Summary

> The operating system is stored on HDD/SSD, but it only exists as a running system after firmware and bootloader reload the kernel into RAM on every power-on.

---

This understanding is foundational for:
- Secure boot
- Virtual machines
- Containers
- Embedded systems
